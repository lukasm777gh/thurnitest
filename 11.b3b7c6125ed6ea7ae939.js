(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"5zjZ":function(l,n,e){"use strict";e.r(n);var t=e("CcnG"),u=function(){return function(){}}(),i=e("pMnS"),a=e("Ip0R"),o=e("d1O/"),s=e("PPNb"),r=function(){function l(l,n){this.crudServiceCtrl=l,this.handleService=n,this.touchEmitter=new t.EventEmitter,this.userHistory=new Array,this.momentaryUsersHistory=new Array,this.chatType=0}return l.prototype.ngOnInit=function(){this.listUser()},l.prototype.newTouch=function(l){this.touchEmitter.emit(l)},l.prototype.listUser=function(){var l=this;this.crudServiceCtrl.getModel("chat/listar").subscribe((function(n){201===n.code&&(l.userHistory=n.answerList,l.momentaryUsersHistory=n.answerList)}),(function(n){l.handleService.handleError(n)}))},l}(),d=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function c(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","chat-name_media-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"img",[["alt","Generic placeholder image"],["class","rounded-circle mr-1"],["width","54"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","chat-name_media_name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["class","chat-name_media_connection active"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["En linea"]))],null,(function(l,n){l(n,1,0,"https://sistemas.com/termino/wp-content/uploads/Usuario-Icono.jpg"),l(n,3,0,n.parent.context.$implicit.email)}))}function m(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"div",[["class","chat-name_media-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"img",[["alt","Generic placeholder image"],["class","rounded-circle mr-1"],["width","54"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"span",[["class","chat-name_media_name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](3,null,["",""])),(l()(),t["\u0275eld"](4,0,null,null,1,"span",[["class","chat-name_media_connection active"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["En linea"]))],null,(function(l,n){l(n,1,0,"https://sistemas.com/termino/wp-content/uploads/Usuario-Icono.jpg"),l(n,3,0,n.parent.context.$implicit.email)}))}function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,5,"a",[["class","list-group-item no-border"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.newTouch(l.context.$implicit)&&t),t}),null,null)),(l()(),t["\u0275eld"](1,0,null,null,4,"span",[["class","chat-name_media"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,c)),t["\u0275did"](3,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](5,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,"ROLE_CARRIER"!==n.context.$implicit.role),l(n,5,0,"ROLE_CARRIER"===n.context.$implicit.role)}),null)}function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,3,"div",[["class","list-group position-relative"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","users-list"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](3,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){l(n,3,0,n.component.userHistory)}),null)}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-list-chats",[],null,null,null,g,d)),t["\u0275did"](1,114688,null,0,r,[s.a,o.a],null,null)],(function(l,n){l(n,1,0)}),null)}var f=t["\u0275ccf"]("app-list-chats",r,h,{chatType:"chatType"},{touchEmitter:"touchEmitter"},[]),v=function(){return function(){this.id="",this.text="",this.attach="",this.img="",this.created="",this.senderId=""}}(),w=function(){function l(){this.message=new v}return l.prototype.ngOnInit=function(){},l.prototype.downloadFile=function(l){window.open(l,"_blank")},l}(),y=t["\u0275crt"]({encapsulation:0,styles:[[".img-style[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}.doc-style[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;height:100px;width:25%;font-size:60px}"]],data:{}});function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","chat_message_text"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,[" "," "]))],null,(function(l,n){l(n,2,0,n.component.message.text)}))}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"img",[["alt","Tu foto"],["class","img-style"],["height","200px"],["width","100%"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,n.component.message.text)}))}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"a",[["class","ft-file align-top btn text-lg-right margin-right doc-style"]],null,[[null,"click"]],(function(l,n,e){var t=!0,u=l.component;return"click"===n&&(t=!1!==u.downloadFile(u.message.text)&&t),t}),null,null))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","chat_message_file"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.message.attach&&e.message.img),l(n,4,0,e.message.attach&&!e.message.img)}),null)}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","chat_message"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](5,0,null,null,1,"span",[["class","chat_message_time"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["9:48 a.m."]))],(function(l,n){var e=n.component;l(n,2,0,!e.message.attach),l(n,4,0,e.message.attach)}),null)}var _=function(){function l(){this.message=new v}return l.prototype.ngOnInit=function(){},l.prototype.downloadFile=function(l){window.open(l,"_blank")},l}(),x=t["\u0275crt"]({encapsulation:0,styles:[[".img-style[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}.doc-style[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;height:100px;width:25%;font-size:60px}"]],data:{}});function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","chat_message_text"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t["\u0275ted"](2,null,[" "," "]))],null,(function(l,n){l(n,2,0,n.component.message.text)}))}function U(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"img",[["alt","Tu foto"],["class","img-style"],["height","200px"],["width","100%"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,n.component.message.text)}))}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"a",[["class","ft-file white align-top btn text-lg-right margin-right doc-style"]],null,[[null,"click"]],(function(l,n,e){var t=!0,u=l.component;return"click"===n&&(t=!1!==u.downloadFile(u.message.text)&&t),t}),null,null))],null,null)}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","chat_message_file"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,U)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.message.attach&&e.message.img),l(n,4,0,e.message.attach&&!e.message.img)}),null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,6,"div",[["class","chat_message"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275eld"](5,0,null,null,1,"span",[["class","chat_message_time"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["9:48 a.m."]))],(function(l,n){var e=n.component;l(n,2,0,!e.message.attach),l(n,4,0,e.message.attach)}),null)}var D=e("gIcY"),N=e("4GxJ"),O=e("mrSG"),F=e("ulU8"),V=e("/yGV"),L=(e("6233"),e("fCAG")),H=e("4aVy"),j=e("zidw"),A=function(){function l(l,n,e,u,i,a,o){this.authDataStorage=l,this.databaseCtrl=n,this.firebaseStorageServiceCtrl=e,this.modalService=u,this.backendServiceCtrl=i,this.outputServiceCtrl=a,this.handleService=o,this.friendUser=new H.a,this.myUser=new H.a,this.messagesHistory=new Array,this.newMessageText="",this.toSave="",this.fileModel=new j.a,this.firstTime=!0,this.limit=30,this.sidebarToggle=new t.EventEmitter}return l.prototype.ngOnInit=function(){},l.prototype.consultHistoryChat=function(l){var n=this;this.messagesRef=this.databaseCtrl.list("chats/"+this.myUser.id+"/"+this.friendUser.id,(function(l){return l.orderByChild("id").limitToLast(n.limit)})),this.messagesFriendRef=this.databaseCtrl.list("chats/"+this.friendUser.id+"/"+this.myUser.id),this.messagesRef.valueChanges().subscribe((function(e){if(l)for(var t=0;t<e.length-n.messagesHistory.length;t++)n.messagesHistory.unshift(e[t]);else{if(n.messagesHistory.length<=9||n.firstTime){for(t=n.messagesHistory.length;t<e.length;t++)n.messagesHistory.push(e[t]);n.firstTime=!1}else void 0!==e[e.length-1]&&e.length>10&&n.searchLastIndex(e).then((function(l){console.log(l);for(var t=l+1;t<e.length;t++)n.messagesHistory.push(e[t])})).catch((function(l){n.handleService.handleError(l)}));setTimeout((function(){n.scrollToBottom()}),1e3)}}))},l.prototype.searchLastIndex=function(l){return O.__awaiter(this,void 0,void 0,(function(){var n,e,t=this;return O.__generator(this,(function(u){return n=l.find((function(l){return l.id===t.messagesHistory[t.messagesHistory.length-1].id})),(e=l.indexOf(n))>=0?[2,e]:[2,1e3]}))}))},l.prototype.sendNewMessage=function(l){var n=this;this.backendServiceCtrl.getModelWA("usuarios/enviar-notificacion?title=Nuevo mensaje de la empresa "+this.myUser.username+"&bodyMessage="+l+"&icon=default&idUserTo="+this.friendUser.id+"&page=").subscribe((function(l){200===l.code||n.outputServiceCtrl.getInfoMessageBadInternet()}))},l.prototype.doRefresh=function(){var l=this;this.limit=this.limit+50,setTimeout((function(){l.consultHistoryChat(!0)}),500),setTimeout((function(){l.myScrollContainer.nativeElement.scrollTop=l.myScrollContainer.nativeElement.scrollTop+5}),1e3)},l.prototype.scroll=function(l){l.srcElement.scrollTop<20&&this.doRefresh()},l.prototype.setFriendChat=function(){this.firstTime=!0,this.limit=30,this.messagesHistory=new Array,this.myUser.id=Number(this.authDataStorage.getId()),this.myUser.username=this.authDataStorage.getCompanyName(),this.consultHistoryChat(!1)},l.prototype.pushNewMessage=function(l){var n=this;this.toSave=this.newMessageText,this.sendNewMessage(this.toSave),this.newMessageText="",this.messagesRef.push({created:(new Date).toUTCString(),text:this.toSave,attach:l,img:!1,senderId:this.myUser.id,id:(new Date).getTime()}).then((function(l){})).catch((function(l){n.handleService.handleError(l)})),this.messagesFriendRef.push({created:(new Date).toUTCString(),text:this.toSave,attach:l,img:!1,senderId:this.myUser.id,id:(new Date).getTime()}).then((function(l){})).catch((function(l){n.handleService.handleError(l)}))},l.prototype.pushAttach=function(l,n,e){var t=this;this.sendNewMessage("Nuevo archivo adjunto"),this.messagesRef.push({created:(new Date).toUTCString(),text:n,attach:l,img:e,senderId:this.myUser.id,id:(new Date).getTime()}).then((function(l){})).catch((function(l){t.handleService.handleError(l)})),this.messagesFriendRef.push({created:(new Date).toUTCString(),text:n,attach:l,img:e,senderId:this.myUser.id,id:(new Date).getTime()}).then((function(l){})).catch((function(l){t.handleService.handleError(l)}))},l.prototype.scrollToBottom=function(){try{this.myScrollContainer.nativeElement.scrollTop=this.myScrollContainer.nativeElement.scrollHeight}catch(l){console.error(l)}},l.prototype.loadImage=function(){},l.prototype.loadDocument=function(){},l.prototype.sidebarToggleEmit=function(){var l=this.chatSidebarToggle=!this.chatSidebarToggle;this.sidebarToggle.emit(l)},l}(),P=e("3iKN"),z=t["\u0275crt"]({encapsulation:0,styles:[[".search-results[_ngcontent-%COMP%]{height:70vh}"]],data:{}});function B(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-message-in",[],null,null,null,R,y)),t["\u0275did"](1,114688,null,0,w,[],{message:[0,"message"]},null)],(function(l,n){l(n,1,0,n.parent.context.$implicit)}),null)}function G(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-message-out",[],null,null,null,k,x)),t["\u0275did"](1,114688,null,0,_,[],{message:[0,"message"]},null)],(function(l,n){l(n,1,0,n.parent.context.$implicit)}),null)}function $(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","chat"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,B)),t["\u0275did"](2,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,G)),t["\u0275did"](4,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,n.context.$implicit.senderId===e.myUser.id),l(n,4,0,n.context.$implicit.senderId!==e.myUser.id)}),null)}function q(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,16,"section",[["class","chat-app-form"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,15,"form",[["class","chat-app-input"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,3).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,3).onReset()&&u),u}),null,null)),t["\u0275did"](2,16384,null,0,D.B,[],null,null),t["\u0275did"](3,4210688,null,0,D.s,[[8,null],[8,null]],null,null),t["\u0275prd"](2048,null,D.c,null,[D.s]),t["\u0275did"](5,16384,null,0,D.r,[[4,D.c]],null,null),(l()(),t["\u0275eld"](6,0,null,null,10,"fieldset",[["class","chat-app-input_wrap has-icon-left"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,6,"textarea",[["class","form-control"],["id","newMessageText"],["name","newMessageText"],["placeholder","Escribe un mensaje aqui."]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(l,n,e){var u=!0,i=l.component;return"input"===n&&(u=!1!==t["\u0275nov"](l,8)._handleInput(e.target.value)&&u),"blur"===n&&(u=!1!==t["\u0275nov"](l,8).onTouched()&&u),"compositionstart"===n&&(u=!1!==t["\u0275nov"](l,8)._compositionStart()&&u),"compositionend"===n&&(u=!1!==t["\u0275nov"](l,8)._compositionEnd(e.target.value)&&u),"ngModelChange"===n&&(u=!1!==(i.newMessageText=e)&&u),"keyup.enter"===n&&(u=!1!==i.pushNewMessage(!1)&&u),u}),null,null)),t["\u0275did"](8,16384,null,0,D.d,[t.Renderer2,t.ElementRef,[2,D.a]],null,null),t["\u0275prd"](1024,null,D.o,(function(l){return[l]}),[D.d]),t["\u0275did"](10,671744,[["newMessage",4]],0,D.t,[[2,D.c],[8,null],[8,null],[6,D.o]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,D.p,null,[D.t]),t["\u0275did"](12,16384,null,0,D.q,[[4,D.p]],null,null),(l()(),t["\u0275ted"](-1,null,["      "])),(l()(),t["\u0275eld"](14,0,null,null,2,"button",[["class","chat-app-input_button"],["type","button"]],[[8,"hidden",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.pushNewMessage(!1)&&t),t}),null,null)),(l()(),t["\u0275eld"](15,0,null,null,0,"i",[["class","fa fa-paper-plane-o d-block d-xl-inline-block d-lg-none p-0"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,0,"span",[["class","d-none d-lg-inline-block ml-1"]],null,null,null,null,null))],(function(l,n){l(n,10,0,"newMessageText",n.component.newMessageText)}),(function(l,n){var e=n.component;l(n,1,0,t["\u0275nov"](n,5).ngClassUntouched,t["\u0275nov"](n,5).ngClassTouched,t["\u0275nov"](n,5).ngClassPristine,t["\u0275nov"](n,5).ngClassDirty,t["\u0275nov"](n,5).ngClassValid,t["\u0275nov"](n,5).ngClassInvalid,t["\u0275nov"](n,5).ngClassPending),l(n,7,0,t["\u0275nov"](n,12).ngClassUntouched,t["\u0275nov"](n,12).ngClassTouched,t["\u0275nov"](n,12).ngClassPristine,t["\u0275nov"](n,12).ngClassDirty,t["\u0275nov"](n,12).ngClassValid,t["\u0275nov"](n,12).ngClassInvalid,t["\u0275nov"](n,12).ngClassPending),l(n,14,0,""===e.newMessageText)}))}function J(l){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{myScrollContainer:0}),(l()(),t["\u0275eld"](1,0,null,null,32,"div",[["class","chat-name"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,31,"div",[["class","chat-name_wrap"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,7,"div",[["class","chat-name_media"]],null,null,null,null,null)),(l()(),t["\u0275eld"](4,0,null,null,0,"span",[["class","chat-app-sidebar-toggle ft-align-justify font-large-1 mr-2 d-none d-block d-sm-block d-md-none"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.sidebarToggleEmit()&&t),t}),null,null)),(l()(),t["\u0275eld"](5,0,null,null,5,"div",[["class","chat-name_media-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,0,"img",[["alt","avatar"],["class","rounded-circle mr-1"],["width","55"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,1,"span",[["class","chat-name_media_name"]],null,null,null,null,null)),(l()(),t["\u0275ted"](8,null,["",""])),(l()(),t["\u0275eld"](9,0,null,null,1,"span",[["class","chat-name_media_connection active"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["En linea"])),(l()(),t["\u0275eld"](11,0,null,null,22,"div",[["class","chat-name_actions"]],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,21,"ul",[],null,null,null,null,null)),(l()(),t["\u0275eld"](13,0,null,null,20,"li",[],null,null,null,null,null)),(l()(),t["\u0275eld"](14,0,null,null,1,"button",[],[[8,"hidden",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.loadImage()&&t),t}),null,null)),(l()(),t["\u0275eld"](15,0,null,null,0,"i",[["class","fas fa fa-camera"]],null,null,null,null,null)),(l()(),t["\u0275eld"](16,0,null,null,1,"button",[],[[8,"hidden",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.loadDocument()&&t),t}),null,null)),(l()(),t["\u0275eld"](17,0,null,null,0,"i",[["class","fas fa fa-paperclip"]],null,null,null,null,null)),(l()(),t["\u0275eld"](18,0,null,null,15,"div",[["class","dropdown"],["ngbDropdown",""],["placement","bottom-right"]],[[8,"hidden",0],[2,"show",null]],null,null,null,null)),t["\u0275did"](19,212992,null,2,N.u,[t.ChangeDetectorRef,N.v,a.DOCUMENT,t.NgZone],{placement:[0,"placement"]},null),t["\u0275qud"](335544320,2,{_menu:0}),t["\u0275qud"](335544320,3,{_anchor:0}),(l()(),t["\u0275eld"](22,0,null,null,3,"button",[["aria-haspopup","true"],["class","dropdown-toggle"],["id","dropdownBasic1"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,23).toggleOpen()&&u),u}),null,null)),t["\u0275did"](23,16384,null,0,N.kb,[N.u,t.ElementRef],null,null),t["\u0275prd"](2048,[[3,4]],N.jb,null,[N.kb]),(l()(),t["\u0275eld"](25,0,null,null,0,"i",[["class","fas fa fa-ellipsis-v"]],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,7,"div",[["aria-labelledby","dropdownBasic1"],["class","dropdown-menu"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],null,null,null,null)),t["\u0275did"](27,16384,[[2,4]],0,N.ib,[N.u,t.ElementRef,t.Renderer2],null,null),(l()(),t["\u0275eld"](28,0,null,null,1,"button",[["class","dropdown-item"],["ngbDropdownItem",""]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Info. del contacto"])),(l()(),t["\u0275eld"](30,0,null,null,1,"button",[["class","dropdown-item"],["ngbDropdownItem",""]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Vaciar mensajes"])),(l()(),t["\u0275eld"](32,0,null,null,1,"button",[["class","dropdown-item"],["ngbDropdownItem",""]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Eliminar chat"])),(l()(),t["\u0275eld"](34,0,[[1,0],["scrollMe",1]],null,5,"section",[["class","chat-app-window"]],null,[[null,"scroll"]],(function(l,n,e){var t=!0;return"scroll"===n&&(t=!1!==l.component.scroll(e)&&t),t}),null,null)),(l()(),t["\u0275eld"](35,0,null,null,1,"div",[["class","badge"]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["18 de junio de 2019"])),(l()(),t["\u0275eld"](37,0,null,null,2,"div",[["class","chats"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,$)),t["\u0275did"](39,278528,null,0,a.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,q)),t["\u0275did"](41,16384,null,0,a.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,19,0,"bottom-right"),l(n,39,0,e.messagesHistory),l(n,41,0,void 0!==e.messagesRef)}),(function(l,n){var e=n.component;l(n,6,0,"https://sistemas.com/termino/wp-content/uploads/Usuario-Icono.jpg"),l(n,8,0,e.friendUser.username),l(n,14,0,""!==e.newMessageText||null===e.friendUser.id),l(n,16,0,""!==e.newMessageText||null===e.friendUser.id),l(n,18,0,null===e.friendUser.id,t["\u0275nov"](n,19).isOpen()),l(n,22,0,t["\u0275nov"](n,23).dropdown.isOpen()),l(n,26,0,!0,t["\u0275nov"](n,27).dropdown.isOpen(),t["\u0275nov"](n,27).placement)}))}function Y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-view-chat",[],null,null,null,J,z)),t["\u0275did"](1,114688,null,0,A,[V.a,P.a,F.a,N.z,s.a,L.a,o.a],null,null)],(function(l,n){l(n,1,0)}),null)}var Z=t["\u0275ccf"]("app-view-chat",A,Y,{friendUser:"friendUser",myUser:"myUser",chatSidebarToggle:"chatSidebarToggle"},{sidebarToggle:"sidebarToggle"},[]),K=function(){function l(l,n){this.renderer=l,this.el=n,this.myUser=new H.a,this.friendToShowUser=new H.a}return l.prototype.ngOnInit=function(){},l.prototype.openChatUser=function(l){console.log("userTouched",l),this.viewChat.friendUser=l,this.viewChat.setFriendChat()},l.prototype.deleteChatUser=function(){},l.prototype.sidebarToggle=function(l){this.chatSidebarToggle=l,l?this.renderer.setStyle(document.body,"overflow","hidden"):this.renderer.removeStyle(document.body,"overflow")},l.prototype.hideListChats=function(){this.chatSidebarToggle=!this.chatSidebarToggle,this.renderer.removeStyle(document.body,"overflow")},l}(),X=t["\u0275crt"]({encapsulation:0,styles:[[""]],data:{}});function W(l){return t["\u0275vid"](0,[t["\u0275qud"](402653184,1,{viewChat:0}),(l()(),t["\u0275eld"](1,0,null,null,40,"div",[["class","chat-application"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,34,"div",[["class","chat-sidebar  d-md-block ps ps--active-y"]],null,null,null,null,null)),t["\u0275did"](3,278528,null,0,a.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](4,{"d-none":0,"d-block":1}),(l()(),t["\u0275eld"](5,0,null,null,31,"div",[["class","chat-sidebar-content"]],null,null,null,null,null)),(l()(),t["\u0275eld"](6,0,null,null,18,"header",[["class","chat-sidebar_content_header"]],null,null,null,null,null)),(l()(),t["\u0275eld"](7,0,null,null,2,"div",[["class","chat-name_media"]],null,null,null,null,null)),(l()(),t["\u0275eld"](8,0,null,null,1,"div",[["class","chat-name_media-body"]],null,null,null,null,null)),(l()(),t["\u0275eld"](9,0,null,null,0,"img",[["alt","avatar"],["class","rounded-circle mr-1"],["src","https://sistemas.com/termino/wp-content/uploads/Usuario-Icono.jpg"],["width","55"]],null,null,null,null,null)),(l()(),t["\u0275eld"](10,0,null,null,14,"div",[["class","chat-name_actions"]],null,null,null,null,null)),(l()(),t["\u0275eld"](11,0,null,null,13,"ul",[],null,null,null,null,null)),(l()(),t["\u0275eld"](12,0,null,null,12,"li",[],null,null,null,null,null)),(l()(),t["\u0275eld"](13,0,null,null,11,"div",[["class","dropdown"],["ngbDropdown",""],["placement","bottom-right"]],[[2,"show",null]],null,null,null,null)),t["\u0275did"](14,212992,null,2,N.u,[t.ChangeDetectorRef,N.v,a.DOCUMENT,t.NgZone],{placement:[0,"placement"]},null),t["\u0275qud"](335544320,2,{_menu:0}),t["\u0275qud"](335544320,3,{_anchor:0}),(l()(),t["\u0275eld"](17,0,null,null,3,"button",[["aria-haspopup","true"],["class","dropdown-toggle dropdown-toggle"],["id","dropdownMe"],["ngbDropdownToggle",""]],[[1,"aria-expanded",0]],[[null,"click"]],(function(l,n,e){var u=!0;return"click"===n&&(u=!1!==t["\u0275nov"](l,18).toggleOpen()&&u),u}),null,null)),t["\u0275did"](18,16384,null,0,N.kb,[N.u,t.ElementRef],null,null),t["\u0275prd"](2048,[[3,4]],N.jb,null,[N.kb]),(l()(),t["\u0275eld"](20,0,null,null,0,"i",[["class","fas fa fa-ellipsis-v"]],null,null,null,null,null)),(l()(),t["\u0275eld"](21,0,null,null,3,"div",[["aria-labelledby","dropdownMe"],["class","dropdown-menu"],["ngbDropdownMenu",""]],[[2,"dropdown-menu",null],[2,"show",null],[1,"x-placement",0]],null,null,null,null)),t["\u0275did"](22,16384,[[2,4]],0,N.ib,[N.u,t.ElementRef,t.Renderer2],null,null),(l()(),t["\u0275eld"](23,0,null,null,1,"button",[["class","dropdown-item"],["ngbdropdownitem",""]],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["My information"])),(l()(),t["\u0275eld"](25,0,null,null,9,"div",[["class","chat-fixed-search"]],null,null,null,null,null)),(l()(),t["\u0275eld"](26,0,null,null,8,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0;return"submit"===n&&(u=!1!==t["\u0275nov"](l,28).onSubmit(e)&&u),"reset"===n&&(u=!1!==t["\u0275nov"](l,28).onReset()&&u),u}),null,null)),t["\u0275did"](27,16384,null,0,D.B,[],null,null),t["\u0275did"](28,4210688,null,0,D.s,[[8,null],[8,null]],null,null),t["\u0275prd"](2048,null,D.c,null,[D.s]),t["\u0275did"](30,16384,null,0,D.r,[[4,D.c]],null,null),(l()(),t["\u0275eld"](31,0,null,null,3,"div",[["class","position-relative has-icon-right"]],null,null,null,null,null)),(l()(),t["\u0275eld"](32,0,null,null,0,"input",[["class","form-control"],["id","timesheetinput1"],["name","employeename"],["placeholder","Buscar contacto"],["type","text"]],null,null,null,null,null)),(l()(),t["\u0275eld"](33,0,null,null,1,"div",[["class","form-control-position"]],null,null,null,null,null)),(l()(),t["\u0275eld"](34,0,null,null,0,"i",[["class","ft-search"]],null,null,null,null,null)),(l()(),t["\u0275eld"](35,0,null,null,1,"app-list-chats",[],null,[[null,"touchEmitter"]],(function(l,n,e){var t=!0;return"touchEmitter"===n&&(t=!1!==l.component.openChatUser(e)&&t),t}),g,d)),t["\u0275did"](36,114688,null,0,r,[s.a,o.a],null,{touchEmitter:"touchEmitter"}),(l()(),t["\u0275eld"](37,0,null,null,1,"app-view-chat",[],null,[[null,"sidebarToggle"]],(function(l,n,e){var t=!0;return"sidebarToggle"===n&&(t=!1!==l.component.sidebarToggle(e)&&t),t}),J,z)),t["\u0275did"](38,114688,[[1,4],["ViewChatComponent",4]],0,A,[V.a,P.a,F.a,N.z,s.a,L.a,o.a],{friendUser:[0,"friendUser"],myUser:[1,"myUser"],chatSidebarToggle:[2,"chatSidebarToggle"]},{sidebarToggle:"sidebarToggle"}),(l()(),t["\u0275eld"](39,0,null,null,2,"div",[["class","content-overlay"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.hideListChats()&&t),t}),null,null)),t["\u0275did"](40,278528,null,0,a.NgClass,[t.IterableDiffers,t.KeyValueDiffers,t.ElementRef,t.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t["\u0275pod"](41,{show:0})],(function(l,n){var e=n.component,t=l(n,4,0,!e.chatSidebarToggle,e.chatSidebarToggle);l(n,3,0,"chat-sidebar  d-md-block ps ps--active-y",t),l(n,14,0,"bottom-right"),l(n,36,0),l(n,38,0,e.friendToShowUser,e.myUser,e.chatSidebarToggle);var u=l(n,41,0,e.chatSidebarToggle);l(n,40,0,"content-overlay",u)}),(function(l,n){l(n,13,0,t["\u0275nov"](n,14).isOpen()),l(n,17,0,t["\u0275nov"](n,18).dropdown.isOpen()),l(n,21,0,!0,t["\u0275nov"](n,22).dropdown.isOpen(),t["\u0275nov"](n,22).placement),l(n,26,0,t["\u0275nov"](n,30).ngClassUntouched,t["\u0275nov"](n,30).ngClassTouched,t["\u0275nov"](n,30).ngClassPristine,t["\u0275nov"](n,30).ngClassDirty,t["\u0275nov"](n,30).ngClassValid,t["\u0275nov"](n,30).ngClassInvalid,t["\u0275nov"](n,30).ngClassPending)}))}function Q(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"app-chat",[],null,null,null,W,X)),t["\u0275did"](1,114688,null,0,K,[t.Renderer2,t.ElementRef],null,null)],(function(l,n){l(n,1,0)}),null)}var ll=t["\u0275ccf"]("app-chat",K,Q,{myUser:"myUser",friendToShowUser:"friendToShowUser"},{},[]),nl=e("9AJC"),el=e("naEI"),tl=e("ZYCi"),ul=e("jGGy"),il={expectedRole:["ROLE_SUPER","ROLE_ADMIN"]},al={expectedRole:["ROLE_SUPER","ROLE_ADMIN"]},ol={expectedRole:["ROLE_SUPER","ROLE_ADMIN"]},sl=function(){return function(){}}();e("F/XL"),e("bne5"),e("psW0"),e("67Y/"),e("xMyE"),e("VnD/"),e("/ojb");var rl=function(){return function(){}}();e.d(n,"ChatModuleNgFactory",(function(){return dl}));var dl=t["\u0275cmf"](u,[],(function(l){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,f,Z,ll,nl.a,nl.b,nl.k,nl.g,nl.h,nl.i,nl.j]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[t.LOCALE_ID,[2,a["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,el.a,el.a,[tl.l,ul.a,V.a]),t["\u0275mpd"](4608,D.f,D.f,[]),t["\u0275mpd"](4608,D.C,D.C,[]),t["\u0275mpd"](4608,N.z,N.z,[t.ComponentFactoryResolver,t.Injector,N.db,N.A]),t["\u0275mpd"](1073742336,a.CommonModule,a.CommonModule,[]),t["\u0275mpd"](1073742336,tl.p,tl.p,[[2,tl.v],[2,tl.l]]),t["\u0275mpd"](1073742336,sl,sl,[]),t["\u0275mpd"](1073742336,D.z,D.z,[]),t["\u0275mpd"](1073742336,D.v,D.v,[]),t["\u0275mpd"](1073742336,D.k,D.k,[]),t["\u0275mpd"](1073742336,rl,rl,[]),t["\u0275mpd"](1073742336,N.c,N.c,[]),t["\u0275mpd"](1073742336,N.g,N.g,[]),t["\u0275mpd"](1073742336,N.h,N.h,[]),t["\u0275mpd"](1073742336,N.l,N.l,[]),t["\u0275mpd"](1073742336,N.n,N.n,[]),t["\u0275mpd"](1073742336,N.t,N.t,[]),t["\u0275mpd"](1073742336,N.w,N.w,[]),t["\u0275mpd"](1073742336,N.B,N.B,[]),t["\u0275mpd"](1073742336,N.F,N.F,[]),t["\u0275mpd"](1073742336,N.G,N.G,[]),t["\u0275mpd"](1073742336,N.J,N.J,[]),t["\u0275mpd"](1073742336,N.M,N.M,[]),t["\u0275mpd"](1073742336,N.T,N.T,[]),t["\u0275mpd"](1073742336,N.X,N.X,[]),t["\u0275mpd"](1073742336,N.ab,N.ab,[]),t["\u0275mpd"](1073742336,N.bb,N.bb,[]),t["\u0275mpd"](1073742336,N.C,N.C,[]),t["\u0275mpd"](1073742336,u,u,[]),t["\u0275mpd"](1024,tl.j,(function(){return[[{path:"",children:[{path:"listar-chats",component:r,data:il,canActivate:[el.a]},{path:"ver-chat",component:A,data:al,canActivate:[el.a]},{path:"chats",component:K,data:ol,canActivate:[el.a]}]}]]}),[])])}))},zidw:function(l,n,e){"use strict";e.d(n,"a",(function(){return u}));var t=e("YS8f"),u=function(){return function(){this.id=null,this.fileName="",this.downloadUrl="",this.pathFirebaseFile="",this.relationalId=null,this.relationalTypeId=new t.a,this.fileTypeId=new t.a,this.createdDate=(new Date).toISOString()}}()}}]);